---
import { Image } from "astro:assets";
import { ArrowRight } from "@lucide/astro";
import { cn } from "../lib/utils";

export interface BentoItem {
    title: string;
    image: ImageMetadata;
    link: string;
    description?: string;
}

interface Props {
    items: BentoItem[];
    className?: string;
}

const { items, className } = Astro.props;
---

<div
    class={cn(
        "gap-4 md:gap-6 grid grid-cols-1 md:grid-cols-3 auto-rows-[350px]",
        className,
    )}
>
    {
        items.map((item, index) => (
            <a
                href={item.link}
                class={cn(
                    "group block relative bg-foreground shadow-sm hover:shadow-xl rounded-2xl w-full h-full overflow-hidden transition-all hover:-translate-y-1",

                    index === 0 ? "md:col-span-2" : "md:col-span-1",
                )}
            >
                <Image
                    src={item.image}
                    alt={item.title}
                    width={index === 0 ? 1200 : 800}
                    height={index === 0 ? 800 : 600}
                    class="z-0 absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
                />

                {/* 2. GRADIENT OVERLAY */}
                <div class="z-0 absolute inset-0 bg-linear-to-t from-black/90 via-black/40 to-transparent pointer-events-none" />
                <div class="z-0 absolute inset-0 bg-black/10 group-hover:bg-black/0 transition-colors duration-300 pointer-events-none" />

                {/* 3. TEXTOVÝ OBSAH */}
                <div class="z-10 absolute inset-0 flex flex-col justify-end p-6 md:p-8 h-full pointer-events-none">
                    <div class="transition-transform translate-y-2 group-hover:translate-y-0 duration-300 transform">
                        <div class="flex justify-between items-center">
                            <h3
                                class={cn(
                                    "mb-0 font-bold text-background",
                                    index === 0
                                        ? "text-2xl md:text-3xl"
                                        : "text-xl",
                                )}
                            >
                                {item.title}
                            </h3>

                            <div class="bg-background/20 opacity-0 group-hover:opacity-100 backdrop-blur-sm p-2 rounded-full transition-all translate-x-4 group-hover:translate-x-0 duration-300">
                                {/* Lucide ikona se v Astru vyrenderuje jako statické SVG */}
                                <ArrowRight class="w-5 h-5 text-background" />
                            </div>
                        </div>

                        {/* Zobrazit popis jen pokud existuje */}
                        {item.description && (
                            <p class="opacity-80 group-hover:opacity-100 mt-3 max-w-md text-gray-200 line-clamp-2 leading-relaxed transition-opacity duration-300 delay-75">
                                {item.description}
                            </p>
                        )}
                    </div>
                </div>
            </a>
        ))
    }
</div>
